(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[665],{4107:function(e,t,r){Promise.resolve().then(r.bind(r,8931))},8931:function(e,t,r){"use strict";r.r(t);var s=r(7437),a=r(9787),o=r(5778),n=r.n(o),c=r(7138),u=r(6463),l=r(2265),i=r(8726),d=r(3429);t.default=()=>{let{isAuthenticated:e,setIsAuthenticated:t}=(0,d.a)(),r=(0,u.useRouter)();(0,l.useEffect)(()=>{e&&r.push("/")},[e,r]);let[o,p]=(0,l.useState)({username:"",password:""}),h=e=>{p({...o,[e.target.name]:e.target.value})},x=async e=>{e.preventDefault();try{let e=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),s=await e.json();if(!e.ok)throw Error(s.message);t(!0),i.ZP.success(s.message),r.push("/")}catch(e){i.ZP.error(e.message)}};return(0,s.jsxs)("form",{onSubmit:x,className:"w-[300px] sm:w-[350px] h-auto md:w-[450px] py-8 md:py-16 lg:w-[600px] rounded-[50px] bg-[#C4C4C4] border-black border-[1px] flex flex-col items-center gap-12 justify-center",children:[(0,s.jsx)("div",{className:"size-[64px] lg:size-[128px] relative",children:(0,s.jsx)(n(),{src:"/images/smileylogo.png",alt:"SmileySpeak Logo",layout:"fill",objectFit:"cover",sizes:"100%"})}),(0,s.jsxs)("div",{className:"flex flex-col gap-4 md:gap-8 items-center",children:[(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{htmlFor:"username",children:"Username"}),(0,s.jsx)("input",{type:"text",id:"username",name:"username",className:"md:w-[300px] lg:w-[400px] h-[35px] md:h-[50px] rounded-[5px] box-shadow focus:outline-none p-4",placeholder:"DragonSlayer",onChange:h})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{htmlFor:"password",children:"Password"}),(0,s.jsx)("input",{type:"password",id:"password",name:"password",className:"md:w-[300px] lg:w-[400px] h-[35px] md:h-[50px] rounded-[5px] box-shadow focus:outline-none p-4",placeholder:"********",onChange:h})]}),(0,s.jsx)(a.Z,{text:"Log In",redirect:!0})]}),(0,s.jsx)(c.default,{href:"/signup",className:"text-[16px] md:text-[24px] text-[#0400B1]",children:"Don't have an account?"})]})}},9787:function(e,t,r){"use strict";var s=r(7437),a=r(6463),o=r(3429),n=r(8726);t.Z=e=>{let{text:t,redirect:r}=e,c=(0,a.useRouter)(),{setIsAuthenticated:u}=(0,o.a)(),l=async()=>{if("Log Out"==t)try{if(!(await fetch("/api/auth/logout",{method:"POST",headers:{"Content-Type":"application/json"}})).ok)throw Error("An error occurred");return n.ZP.success("Logged out"),u(!1),c.push("/")}catch(e){return n.ZP.error("An error occurred")}if(r)return c.push("home"===t.toLowerCase()?"/":"/".concat(t.toLowerCase().replace(" ","")))};return(0,s.jsx)("button",{className:"px-8 py-4 text-[16px] md:text-[20px] bg-white rounded-[5px] box-shadow hover:bg-[#F0F0F0] text-black",onClick:l,children:t})}},3429:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return n},a:function(){return c}});var s=r(7437),a=r(2265);let o=(0,a.createContext)(void 0),n=e=>{let{children:t}=e,[r,n]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{(async()=>{try{if(!(await fetch("/api/auth/check")).ok)throw Error("Not authenticated");n(!0)}catch(e){n(!1)}})()},[]),(0,s.jsx)(o.Provider,{value:{isAuthenticated:r,setIsAuthenticated:n},children:t})},c=()=>{let e=(0,a.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},function(e){e.O(0,[726,778,291,971,23,744],function(){return e(e.s=4107)}),_N_E=e.O()}]);