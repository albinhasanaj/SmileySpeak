(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[980],{150:function(e,t,r){Promise.resolve().then(r.bind(r,4262))},4262:function(e,t,r){"use strict";r.r(t);var o=r(7437),a=r(6648),s=r(2265),n=r(9787),c=r(8726),l=r(3429),i=r(6463);t.default=()=>{let{isAuthenticated:e,setIsAuthenticated:t}=(0,l.a)(),r=(0,i.useRouter)();(0,s.useEffect)(()=>{e||r.push("/login")},[e,r]);let[u,h]=(0,s.useState)({commentext:"",tags:""}),d=e=>{h({...u,[e.target.name]:e.target.value}),console.log(u)},m=async e=>{e.preventDefault();try{if(u.tags.split(",").length>3)return c.ZP.error("You can only have 3 tags");let e=await fetch("api/comments/createComment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}),t=await e.json();if(!e.ok)throw Error(t.message);c.ZP.success(t.message),r.push("/")}catch(e){c.ZP.error(e.message)}};return(0,o.jsxs)("form",{onSubmit:m,className:"w-[300px] sm:w-[350px] h-auto md:w-[450px] py-8 md:py-16 lg:w-[600px] rounded-[50px] bg-[#C4C4C4] border-black border-[1px] flex flex-col items-center gap-12 justify-center",children:[(0,o.jsx)("div",{className:"size-[64px] lg:size-[128px] relative",children:(0,o.jsx)(a.default,{src:"/images/smileylogo.png",alt:"SmileySpeak Logo",layout:"fill",objectFit:"cover",sizes:"100%"})}),(0,o.jsxs)("div",{className:"flex flex-col gap-4 md:gap-8 items-center",children:[(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("label",{htmlFor:"comment",children:"Comment"}),(0,o.jsx)("textarea",{id:"comment",name:"comment",className:"md:w-[300px] lg:w-[400px] h-[100px] md:h-[150px] rounded-[5px] box-shadow focus:outline-none p-4",placeholder:"Remember when I said I'd never try yoga?...",maxLength:250,onChange:d})]}),(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("label",{htmlFor:"tags",children:"Tags (max 3)"}),(0,o.jsx)("input",{type:"text",id:"tags",name:"tags",className:"md:w-[300px] lg:w-[400px] h-[35px] md:h-[50px] rounded-[5px] box-shadow focus:outline-none p-4",placeholder:"Funny, YogaLaughs, haha",onChange:d})]}),(0,o.jsx)(n.Z,{text:"Create Comment"})]})]})}},9787:function(e,t,r){"use strict";var o=r(7437),a=r(6463),s=r(3429),n=r(8726);t.Z=e=>{let{text:t,redirect:r}=e,c=(0,a.useRouter)(),{setIsAuthenticated:l}=(0,s.a)(),i=async()=>{if("Log Out"==t)try{if(!(await fetch("/api/auth/logout",{method:"POST",headers:{"Content-Type":"application/json"}})).ok)throw Error("An error occurred");return n.ZP.success("Logged out"),l(!1),c.push("/")}catch(e){return n.ZP.error("An error occurred")}if(r)return c.push("home"===t.toLowerCase()?"/":"/".concat(t.toLowerCase().replace(" ","")))};return(0,o.jsx)("button",{className:"px-8 py-4 text-[16px] md:text-[20px] bg-white rounded-[5px] box-shadow hover:bg-[#F0F0F0] text-black",onClick:i,children:t})}},3429:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return n},a:function(){return c}});var o=r(7437),a=r(2265);let s=(0,a.createContext)(void 0),n=e=>{let{children:t}=e,[r,n]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{(async()=>{try{if(!(await fetch("/api/auth/check")).ok)throw Error("Not authenticated");n(!0)}catch(e){n(!1)}})()},[]),(0,o.jsx)(s.Provider,{value:{isAuthenticated:r,setIsAuthenticated:n},children:t})},c=()=>{let e=(0,a.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},function(e){e.O(0,[726,595,971,23,744],function(){return e(e.s=150)}),_N_E=e.O()}]);